<div class="container border shadow bg-white rounded-4 p-4"
     data-controller="book-form"
     data-book-form-price-value=<%= pigeon.price %>
     data-book-form-grooming-value=<%= pigeon.grooming_fee %>
     data-book-form-service-value=<%= rental.service_fee_per_day %>
     data-book-form-tax-value=<%= rental.tax_rate %>
     >
  <h2><%= pigeon.price %>€ per day</h2>

  <%= simple_form_for rental, url: book_path(pigeon), data: { action: "change->book-form#update" } do |f| %>
    <%= f.input :start_date,
        as: :string,
        label: "Dates",
        wrapper_html: {  class: "" },
        input_html: {
          data: {
            controller: "datepicker",
            datepicker_booked_dates_value: booked_dates.to_json,
            book_form_target: "dates"
          }
        }
    %>
    <%= f.association :payload_type %>
    <%= f.submit "Book #{pigeon.name}", class: "mt-3 btn btn-lg btn-primary w-100" %>
  <% end %>

  <ul class="mt-5 list-unstyled">
    <li class="mb-3 d-flex justify-content-between fs-5">
      <div><%= pigeon.price %>€ x <span data-book-form-target="nbOfDays"></span> days</div>
      <div>
        <span data-book-form-target="rental"></span>€
      </div>
    </li>
    <li class="mb-3 d-flex justify-content-between fs-5">
      <div>Pigeon grooming</div>
     <div>
        <span data-book-form-target="grooming"><%= pigeon.grooming_fee %></span>€
      </div>
    </li>
    <li class="mb-3 d-flex justify-content-between fs-5">
      <div>Pijet service fee</div>
      <div>
        <span data-book-form-target="service"></span>€
      </div>
    </li>
    <li class="mb-3 d-flex justify-content-between fs-5">
      <div>Taxes</div>
      <div>
        <span data-book-form-target="tax"></span>€
      </div>
    </li>
  </ul>

  <hr>

  <div class="d-flex justify-content-between fw-bold fs-5">
    <div>Total</div>
    <div>
      <span data-book-form-target="total"></span>€
    </div>
  </div>
</div>
